(this.webpackJsonpgemini=this.webpackJsonpgemini||[]).push([[0],{287:function(t,e,n){t.exports=n(424)},292:function(t,e,n){},387:function(t,e,n){},424:function(t,e,n){"use strict";n.r(e);var o=n(28),a=n.n(o),r=n(184),i=n.n(r),l=(n(292),n(134)),c=n(124),s=n(71),d=n(256),f=n.n(d),m=(n(155),n(264));var u=function(t){var e=t.code,n=t.readOnly,r=Object(o.useRef)(null),i=Object(o.useState)(e),l=Object(c.a)(i,2),s=l[0],d=l[1];return Object(o.useEffect)((function(){d(e)}),[e]),a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,{handleWidth:!0,handleHeight:!0,onResize:function(t,e){var n;null===r||void 0===r||null===(n=r.current)||void 0===n||n.layout({width:t,height:e})}}),a.a.createElement(f.a,{language:"json",value:s,theme:"test",options:{autoClosingBrackets:"never",autoClosingQuotes:"never",cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",lineNumbers:"off",renderLineHighlight:"line",renderIndentGuides:!0,readOnly:n},onChange:function(e,n){d(e),t.onChange&&t.onChange(e)},editorDidMount:function(t,e){console.log("editorDidMount",t),r.current=t,t.focus()},editorWillMount:function(t){}}))},h=n(179),g=n.n(h),y=n(211),p=n(259),v=[{name:"Gene Annotation Plot (Simple)",spec:{tracks:[{data:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/Homo_sapiens.GRCh38.92.glyph.csv",mark:{server:"gemini.v1",type:"glyph-gene-annotation-v2"},x:{field:"start",type:"quantitative"},xe:{field:"end",type:"quantitative"},y:{field:"strand",type:"nominal"},text:{field:"gene_name",type:"nominal"},geneOrExon:{field:"feature",type:"nominal"},color:{value:"#D1D28D"},opacity:{value:.7},stroke:{value:"white"}}]},glyphWidth:300,glyphHeight:300},{name:"Gene Annotation Plot",spec:{tracks:[{data:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/Homo_sapiens.GRCh38.92.glyph.csv",mark:{server:"gemini.v1",type:"glyph-gene-annotation-v1"},x:{field:"start",type:"quantitative"},xe:{field:"end",type:"quantitative"},y:{field:"strand",type:"nominal"},text:{field:"gene_name",type:"nominal"},color:{field:"strand",type:"nominal"},exonVersion:{field:"exon_version",type:"nominal"},geneOrExon:{field:"feature",type:"nominal"},exonId:{field:"exon_id",type:"nominal"},opacity:{value:.9}}]},glyphWidth:600,glyphHeight:300},{name:"Cytogenetic Band",spec:{tracks:[{data:"https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/chr1_cytogenetic_band.glyph.csv",mark:{server:"gemini.v1",type:"cytogenetic-band-v1"},x:{field:"Basepair_start",type:"quantitative"},xe:{field:"Basepair_stop",type:"quantitative"},y:{field:"Chr.",type:"nominal"},text:{field:"Band",type:"nominal"},stain:{field:"Stain",type:"nominal"},color:{field:"Density",type:"nominal",domain:["","25","50","75","100"],range:["white","#D9D9D9","#979797","#636363","black"]}}]},glyphWidth:900,glyphHeight:300},{name:"Six Different Between-Links",spec:{tracks:[{data:"dummy-link",mark:"link-between",x:{field:"from",type:"nominal"},y:{field:"to",type:"nominal"},width:50,height:50},{data:"dummy-link",mark:"link-between",x1:{field:"from",type:"nominal"},y:{field:"to",type:"nominal"},width:50,height:50},{data:"dummy-link",mark:"link-between",x1:{field:"from",type:"nominal"},y1:{field:"to",type:"nominal"},width:50,height:50},{data:"dummy-link",mark:"link-between",x:{field:"from",type:"nominal"},y1:{field:"to",type:"nominal"},width:50,height:50},{data:"dummy-link",mark:"link-between",x:{field:"from",type:"nominal"},x1:{field:"to",type:"nominal"},width:50,height:50},{data:"dummy-link",mark:"link-between",y:{field:"from",type:"nominal"},y1:{field:"to",type:"nominal"},width:50,height:50}]},glyphWidth:0,glyphHeight:0},{name:"Between-Links (Combo)",spec:{references:["http://genocat.tools/tools/combo.html","http://genocat.tools/tools/gbrowse_syn.html","http://genocat.tools/tools/ggbio.html","http://genocat.tools/tools/give.html","http://genocat.tools/tools/variant_view.html"],tracks:[{data:"dummy",mark:"dummy",width:600,height:50},{data:"dummy-link",mark:"link-between",x1:{field:"from",type:"nominal"},x:{field:"to",type:"nominal"},width:600,height:50},{data:"dummy",mark:"dummy",width:600,height:50}]},glyphWidth:0,glyphHeight:0},{name:"Between-Links (Combo, Horizontal)",spec:{layout:{type:"linear",direction:"horizontal",wrap:-1},tracks:[{data:"dummy",mark:"dummy",width:60,height:500},{data:"dummy-link",mark:"link-between",y:{field:"from",type:"nominal"},y1:{field:"to",type:"nominal"},width:60,height:500},{data:"dummy",mark:"dummy",width:60,height:500}]},glyphWidth:0,glyphHeight:0}];n(387);function k(t){return"object"===typeof t&&"glyph"===t.type}function x(t){return null!==t&&"object"===typeof t&&"value"in t}function b(t){return null!==t&&"object"===typeof t&&"bind"in t}function E(t){return"object"===typeof t&&"field"in t}var w=n(178),O=n(260),j=n(261);var z=function(){function t(e){Object(O.a)(this,t),this.track=void 0,this.channelToField=void 0,this.domains=void 0,this.scales=void 0,this.ranges=void 0,this.track=e,this.domains={},this.channelToField={},this.scales={},this.ranges={},k(this.track.mark)&&(this.track.mark.elements=function(t){var e=[];return t.forEach((function(t){if("object"===typeof t.mark)for(var n=t.mark.bind,o=0;o<t.mark.domain.length;o++){var a=t.mark.domain[o],r=t.mark.range[o],i=t.select?t.select:[];e.push(Object(l.a)(Object(l.a)({},t),{},{mark:r,select:[].concat(Object(w.a)(i),[{channel:n,oneOf:[a]}])}))}else e.push(t)})),e}(this.track.mark.elements)),this.setDomains()}return Object(j.a)(t,[{key:"getTrack",value:function(){return this.track}},{key:"getElements",value:function(){return k(this.track.mark)?this.track.mark.elements:[]}},{key:"getFieldByChannel",value:function(t){return this.channelToField[t]}},{key:"setDomains",value:function(){var t=this,e=this.track.data;k(this.track.mark)&&(this.track.mark.requiredChannels.forEach((function(n){var o=t.track[n];if(E(o)){var a=o.field;t.channelToField[n]=a;var r="xe"===n?"x":"ye"===n?"y":n;t.domains[r]||(t.domains[r]=[]),t.domains[r]=[].concat(Object(w.a)(t.domains[r]),Object(w.a)(o.domain?o.domain:e.map((function(t){return t[a]}))))}})),Object.keys(this.domains).forEach((function(e){var n=t.track[e];if(E(n)){var o=n.type;t.domains[e]="nominal"===o?s.i(t.domains[e]).values():s.b(t.domains[e].map((function(t){return+t})))}})))}},{key:"setRanges",value:function(t){var e=this;Object.keys(this.domains).forEach((function(n){var o=e.track[n];E(o)&&("x"===n?e.ranges.x=[t.x,t.x+t.width]:"y"===n?e.ranges.y=[t.y,t.y+t.height]:"color"===n&&(e.ranges.color=o.range?o.range:s.g))}))}},{key:"setScales",value:function(t){var e=this;this.setRanges(t),Object.keys(this.domains).forEach((function(t){var n=e.track[t];if(E(n)){var o=n.type;e.ranges[t]&&(e.scales[t]="color"===t&&"nominal"===o?s.e().domain(e.domains[t]).range(e.ranges[t]):"color"===t&&"quantitative"===o?s.f(s.c).domain(e.domains[t]):"nominal"===o?s.e().domain(e.domains[t]).range(e.ranges[t]):s.d().domain(e.domains[t]).range(e.ranges[t]))}}))}},{key:"getEncoding",value:function(t,e,n,o){var a="xe"===e?"x":"ye"===e?"y":e;if(x(t[e]))switch(e){case"size":case"opacity":case"color":case"text":return t[e].value}else if(x(this.track[e]))switch(e){case"size":case"opacity":case"color":case"text":return this.track[e].value}else{if(this.scales[a]){var r=b(t[e])?this.getFieldByChannel(t[e].bind):this.getFieldByChannel(e);return this.scales[a](n[r])}if("text"!==e){if("w"===e){if(this.scales.x&&E(this.track.x)&&E(this.track.xe)&&"none"!==t.x&&"none"!==t.xe){var i=Math.abs(n[this.getFieldByChannel("xe")]-n[this.getFieldByChannel("x")]);return this.scales.x(i)}return this.getEncoding(t,"size",n)}return{opacity:1,size:10,color:"black",text:""}[e]}var l=b(t.text)?this.getFieldByChannel(t.text.bind):E(this.track.text)?this.track.text.field:void 0;if(l)return n[l]}}},{key:"getScale",value:function(t){return this.scales[t]}}]),t}();function C(t,e,n,o,a){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];s.h(t).attr("width",e).attr("height",n);var i=s.h(t).append("g");i.append("rect").attr("width",e).attr("height",n).attr("stroke","lightgray").attr("fill","white"),r&&(i.append("line").attr("x1",0).attr("x2",e).attr("y1",a).attr("y2",a).attr("class","preview-guideline"),i.append("line").attr("x1",0).attr("x2",e).attr("y1",n-a).attr("y2",n-a).attr("class","preview-guideline"),i.append("line").attr("x1",o).attr("x2",o).attr("y1",0).attr("y2",n).attr("class","preview-guideline"),i.append("line").attr("x1",e-o).attr("x2",e-o).attr("y1",0).attr("y2",n).attr("class","preview-guideline"),i.append("line").attr("x1",0).attr("x2",e).attr("y1",n/2).attr("y2",n/2).attr("class","preview-guideline"),i.append("line").attr("x1",e/2).attr("x2",e/2).attr("y1",0).attr("y2",n).attr("class","preview-guideline"))}function B(t,e,n,o){if(t&&e){s.h(t).selectAll("*").remove();var a=n,r=o;C(t,a,r,60,100),function(t,e,n){var o=new z(e);o.setScales(Object(l.a)(Object(l.a)({},n),{},{y:n.y+n.height/2}));var a=e.data;a?k(e.mark)?o.getElements().forEach((function(e){var n=e.select,r=e.mark,i=[];null===n||void 0===n||n.forEach((function(t){var e=t.channel,n=t.oneOf;o.getFieldByChannel(e)&&i.push({field:o.getFieldByChannel(e),oneOf:n})}));var l,c,s=function(t,e){var n=t.slice();return e.forEach((function(t){n=n.filter((function(e){return-1!==t.oneOf.indexOf(e[t.field])}))})),n}(a,i);if("line"===r)t.selectAll().data(s).enter().append("line").attr("x1",(function(t){return o.getEncoding(e,"x",t)})).attr("x2",(function(t){return o.getEncoding(e,"xe",t)})).attr("y1",(function(t){return o.getEncoding(e,"y",t)})).attr("y2",(function(t){return o.getEncoding(e,"y",t)})).attr("stroke",(function(t){return o.getEncoding(e,"color",t)})).attr("stroke-width",(function(t){return o.getEncoding(e,"size",t)})).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)})).style("stroke-dasharray",null!==(l=null===(c=e.styles)||void 0===c?void 0:c.dashed)&&void 0!==l?l:"");else if("point"===r)t.selectAll("point").data(s).enter().append("circle").attr("fill",(function(t){return o.getEncoding(e,"color",t)})).attr("cx",(function(t){return o.getEncoding(e,"x",t)})).attr("cy",(function(t){return o.getEncoding(e,"x",t)})).attr("r",15).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)}));else if("rect"===r){var d,f,m,u;t.selectAll().data(s).enter().append("rect").attr("x",(function(t){return o.getEncoding(e,"x",t)})).attr("y",(function(t){return o.getEncoding(e,"y",t)-o.getEncoding(e,"size",t)/2})).attr("width",(function(t){return o.getEncoding(e,"xe",t)-o.getEncoding(e,"x",t)})).attr("height",(function(t){return o.getEncoding(e,"size",t)})).attr("fill",(function(t){return o.getEncoding(e,"color",t)})).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)})).attr("stroke",null!==(d=null===(f=e.styles)||void 0===f?void 0:f.stroke)&&void 0!==d?d:"").attr("stroke-width",null!==(m=null===(u=e.styles)||void 0===u?void 0:u.strokeWidth)&&void 0!==m?m:"")}else if("text"===r)t.selectAll().data(s).enter().append("text").text((function(t){return o.getEncoding(e,"text",t)})).attr("x",(function(t){return(o.getEncoding(e,"x",t)+o.getEncoding(e,"xe",t))/2})).attr("y",(function(t){var n;return o.getEncoding(e,"y",t)+(null===(n=e.styles)||void 0===n?void 0:n.dy)})).attr("fill",(function(t){return o.getEncoding(e,"color",t)})).attr("font-size",(function(t){return o.getEncoding(e,"size",t)})).attr("alignment-baseline","top").attr("text-anchor","middle").attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)}));else if("rule"===r)t.selectAll("rule").data(s).enter().append("line").attr("x1",(function(t){return o.getEncoding(e,"x",t)})).attr("x2",(function(t){return o.getEncoding(e,"x",t)})).attr("y1",(function(t){return o.getEncoding(e,"x",t)-o.getEncoding(e,"size",t)/2})).attr("y2",(function(t){return o.getEncoding(e,"x",t)-o.getEncoding(e,"size",t)/2})).attr("stroke",(function(t){return o.getEncoding(e,"color",t)})).attr("stroke-width",3).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)}));else if("triangle-r"===r){var h,g,y,p;t.selectAll("trangle-r").data(s).enter().append("path").attr("d",(function(t){var n=o.getEncoding(e,"size",t),a=o.getEncoding(e,"w",t),r=o.getEncoding(e,"x",t),i=o.getEncoding(e,"y",t);return"M".concat(r+a," ").concat(i)+"L".concat(r," ").concat(i+n/2)+"L".concat(r," ").concat(i-n/2," Z")})).attr("fill",(function(t){return o.getEncoding(e,"color",t)})).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)})).attr("stroke",null!==(h=null===(g=e.styles)||void 0===g?void 0:g.stroke)&&void 0!==h?h:"").attr("stroke-width",null!==(y=null===(p=e.styles)||void 0===p?void 0:p.strokeWidth)&&void 0!==y?y:"")}else if("triangle-l"===r){var v,k,x,b;t.selectAll("trangle-l").data(s).enter().append("path").attr("d",(function(t){var n=o.getEncoding(e,"size",t),a=o.getEncoding(e,"w",t),r=o.getEncoding(e,"x",t),i=o.getEncoding(e,"y",t);return"M".concat(r," ").concat(i)+"L".concat(r+a," ").concat(i+n/2)+"L".concat(r+a," ").concat(i-n/2," Z")})).attr("fill",(function(t){return o.getEncoding(e,"color",t)})).attr("opacity",(function(t){return o.getEncoding(e,"opacity",t)})).attr("stroke",null!==(v=null===(k=e.styles)||void 0===k?void 0:k.stroke)&&void 0!==v?v:"").attr("stroke-width",null!==(x=null===(b=e.styles)||void 0===b?void 0:b.strokeWidth)&&void 0!==x?x:"")}})):console.warn("Glyph is not defined."):console.warn("No array of a JSON object suggested.")}(s.h(t).append("g").attr("width",a-120).attr("height",r-200).attr("transform","translate(".concat(60,",").concat(100,")")),e,{x:0,width:a-120,y:0,height:r-200})}}n(262),n(263);var F=[{name:"glyph-gene-annotation-v1",mark:{type:"glyph",name:"gene-annotation",requiredChannels:["x","xe","y","color","geneOrExon","exonId","exonVersion"],elements:[{description:"horizontal line",select:[{channel:"geneOrExon",oneOf:["gene"]}],mark:"line",color:{value:"black"},size:{value:3}},{description:"exon",select:[{channel:"geneOrExon",oneOf:["exon"]},{channel:"exonVersion",oneOf:["2"]}],mark:"rect",size:{value:25}},{description:"gene left",select:[{channel:"geneOrExon",oneOf:["gene"]}],mark:{bind:"y",domain:["-","+"],range:["triangle-l","rule"]},size:{value:25},xe:"none"},{description:"gene right",select:[{channel:"geneOrExon",oneOf:["gene"]}],mark:{bind:"y",domain:["-","+"],range:["rule","triangle-r"]},size:{value:25},x:{bind:"xe"},xe:"none"},{mark:"text",select:[{channel:"geneOrExon",oneOf:["gene"]}],opacity:{value:1},size:{value:18},styles:{dy:-20}},{mark:"text",select:[{channel:"geneOrExon",oneOf:["exon"]},{channel:"exonVersion",oneOf:["2"]}],text:{bind:"exonId"},opacity:{value:1},size:{value:6},styles:{dy:28}}]}},{name:"glyph-gene-annotation-v2",mark:{type:"glyph",name:"gene-annotation",requiredChannels:["x","xe","y","color","geneOrExon"],elements:[{description:"gene",select:[{channel:"geneOrExon",oneOf:["gene"]}],mark:"rect",size:{value:25}},{description:"gene head",select:[{channel:"geneOrExon",oneOf:["gene"]},{channel:"y",oneOf:["-"]}],mark:"triangle-l",size:{value:25},xe:"none"},{description:"gene right",select:[{channel:"geneOrExon",oneOf:["gene"]},{channel:"y",oneOf:["+"]}],mark:"triangle-r",size:{value:25},x:{bind:"xe"},xe:"none"},{description:"horizontal line",select:[{channel:"geneOrExon",oneOf:["gene"]}],mark:"line",color:{value:"gray"},size:{value:2},styles:{dashed:"3, 3"}},{mark:"text",select:[{channel:"geneOrExon",oneOf:["gene"]}],color:{value:"black"},opacity:{value:1},size:{value:18},styles:{dy:-20}}]}},{name:"cytogenetic-band-v1",mark:{type:"glyph",name:"cytogenetic-band",requiredChannels:["x","xe","y","color","text","stain"],elements:[{description:"symbols",select:[{channel:"stain",oneOf:["gneg","gpos","gvar"]}],mark:"rect",size:{value:25},styles:{stroke:"black",strokeWidth:1}},{description:"acen",select:[{channel:"text",oneOf:["11","11.1"]}],mark:{bind:"text",domain:["11","11.1"],range:["triangle-l","triangle-r"]},color:{value:"#B40101"},size:{value:25},styles:{stroke:"black",strokeWidth:1}},{mark:"text",select:[{channel:"color",oneOf:["100","75","50"]}],color:{value:"black"},size:{value:10},styles:{dy:-20}}]}},{name:"glyph-logo-plot-v1",mark:{type:"glyph",name:"logo",requiredChannels:["x","xe","y"],elements:[{mark:"bar"},{mark:"text",color:{value:"black"}}]}}],S=["glyph-gene-annotation-v1","glyph-gene-annotation-v2","cytogenetic-band-v1","glyph-logo-plot-v1"];function W(t){for(var e=function(e){var n,o,a=t.tracks[e],r=null===(n=a.mark)||void 0===n?void 0:n.type;S.includes(r)&&(a.mark=null===(o=F.find((function(t){return t.name===r})))||void 0===o?void 0:o.mark)},n=0;n<t.tracks.length;n++)e(n);return t}var A=[{from:0,to:46},{from:1,to:88},{from:2,to:53},{from:3,to:81},{from:4,to:50},{from:5,to:34},{from:6,to:41},{from:7,to:72},{from:8,to:49},{from:9,to:92},{from:10,to:96},{from:11,to:44},{from:12,to:29},{from:13,to:70},{from:14,to:54},{from:15,to:90},{from:16,to:28},{from:17,to:17},{from:18,to:87},{from:19,to:59},{from:20,to:33},{from:21,to:16},{from:22,to:1},{from:23,to:57},{from:24,to:3},{from:25,to:30},{from:26,to:27},{from:27,to:75},{from:28,to:85},{from:29,to:61},{from:30,to:97},{from:31,to:8},{from:32,to:98},{from:33,to:71},{from:34,to:38},{from:35,to:14},{from:36,to:45},{from:37,to:63},{from:38,to:62},{from:39,to:42},{from:40,to:39},{from:41,to:79},{from:42,to:19},{from:43,to:2},{from:44,to:12},{from:45,to:11},{from:46,to:52},{from:47,to:76},{from:48,to:69},{from:49,to:65},{from:50,to:68},{from:51,to:15},{from:52,to:77},{from:53,to:37},{from:54,to:80},{from:55,to:7},{from:56,to:0},{from:57,to:66},{from:58,to:82},{from:59,to:95},{from:60,to:24},{from:61,to:51},{from:62,to:78},{from:63,to:83},{from:64,to:6},{from:65,to:48},{from:66,to:23},{from:67,to:20},{from:68,to:67},{from:69,to:5},{from:70,to:86},{from:71,to:10},{from:72,to:91},{from:73,to:40},{from:74,to:99},{from:75,to:13},{from:76,to:31},{from:77,to:22},{from:78,to:55},{from:79,to:18},{from:80,to:58},{from:81,to:43},{from:82,to:93},{from:83,to:9},{from:84,to:36},{from:85,to:26},{from:86,to:47},{from:87,to:89},{from:88,to:73},{from:89,to:64},{from:90,to:56},{from:91,to:94},{from:92,to:84},{from:93,to:21},{from:94,to:32},{from:95,to:74},{from:96,to:25},{from:97,to:60},{from:98,to:4},{from:99,to:35}],D=[{from:0,from1:9,to:30,to1:39},{from:10,from1:19,to:50,to1:59},{from:20,from1:29,to:90,to1:99},{from:30,from1:39,to:60,to1:69},{from:40,from1:49,to:40,to1:49},{from:50,from1:59,to:80,to1:89},{from:60,from1:69,to:0,to1:9},{from:70,from1:79,to:20,to1:29},{from:80,from1:89,to:10,to1:19},{from:90,from1:99,to:70,to1:79}];function G(t,e){t.selectAll("*").remove();var n=[],o=0,a=0;e.tracks.forEach((function(t){var r;"dummy-link"===t.data?t.data=A:"dummy-band"===t.data&&(t.data=D),"horizontal"!==(null===(r=e.layout)||void 0===r?void 0:r.direction)?(n.push({bb:{x:0,width:t.width,y:o,height:t.height},track:t}),o+=t.height+0):(n.push({bb:{x:a,width:t.width,y:0,height:t.height},track:t}),a+=t.width+0)})),t.selectAll("rect").data(n).enter().filter((function(t){return"link-between"!==t.track.mark&&"empty"!==t.track.mark})).append("rect").attr("x",(function(t){return t.bb.x})).attr("width",(function(t){return t.bb.width})).attr("y",(function(t){return t.bb.y})).attr("height",(function(t){return t.bb.height})).attr("fill","#F6F6F6").attr("stroke","lightgray").attr("stroke-width",1),function(t,e){e.filter((function(t){return"link-between"===t.track.mark})).forEach((function(e){var n=e.bb,o=s.d().domain([0,100]).range([n.x,n.x+n.width]),a=s.d().domain([0,100]).range([n.y,n.y+n.height]),r=E(e.track.x)?e.track.x.field:void 0,i=E(e.track.x1)?e.track.x1.field:void 0,l=E(e.track.y)?e.track.y.field:void 0,d=E(e.track.y1)?e.track.y1.field:void 0,f=[r,i,l,d].filter((function(t){return t})),m=Object(c.a)(f,2),u=m[0],h=m[1],g=t.selectAll(".line").data(e.track.data).enter().filter((function(t){return Math.abs(t[u]-t[h])<30})).append("line");r&&l?g.attr("x1",n.x).attr("y1",(function(t){return a(t[l])})).attr("x2",(function(t){return o(t[r])})).attr("y2",n.y+n.height):i&&l?g.attr("x1",n.x).attr("y1",(function(t){return a(t[l])})).attr("x2",(function(t){return o(t[i])})).attr("y2",n.y):i&&d?g.attr("x1",n.x+n.width).attr("y1",(function(t){return a(t[d])})).attr("x2",(function(t){return o(t[i])})).attr("y2",n.y):r&&d?g.attr("x1",n.x+n.width).attr("y1",(function(t){return a(t[d])})).attr("x2",(function(t){return o(t[r])})).attr("y2",n.y+n.height):r&&i?g.attr("x1",(function(t){return o(t[r])})).attr("y1",n.y+n.height).attr("x2",(function(t){return o(t[i])})).attr("y2",n.y):l&&d&&g.attr("x1",n.x).attr("y1",(function(t){return a(t[l])})).attr("x2",n.x+n.width).attr("y2",(function(t){return a(t[d])})),t.selectAll("line").attr("fill","black").attr("stroke","black").attr("stroke-width",2).attr("opacity",.3)}))}(t,n)}function H(t){var e,n={width:0,height:0};return"horizontal"!==(null===(e=t.layout)||void 0===e?void 0:e.direction)?t.tracks.forEach((function(e,o){var a,r;n.height+=null!==(a=e.height)&&void 0!==a?a:0,o!==t.tracks.length-1&&(n.height+=0),n.width=Math.max(null!==(r=e.width)&&void 0!==r?r:0,n.width)})):t.tracks.forEach((function(e,o){var a,r;n.width+=null!==(a=e.width)&&void 0!==a?a:0,o!==t.tracks.length-1&&(n.width+=0),n.height=Math.max(null!==(r=e.height)&&void 0!==r?r:0,n.height)})),n}var q=v.length-1;var _=function(){var t=Object(o.useRef)(null),e=Object(o.useRef)(null),n=Object(o.useState)(v[q]),r=Object(c.a)(n,2),i=r[0],d=r[1],f=Object(o.useState)("Full Glyph Definition"),m=Object(c.a)(f,2),h=m[0],k=m[1],x=Object(o.useState)(g()(v[q].spec)),b=Object(c.a)(x,2),E=b[0],w=b[1],O=Object(o.useState)(v[q].glyphWidth),j=Object(c.a)(O,2),z=j[0],F=j[1],S=Object(o.useState)(v[q].glyphHeight),A=Object(c.a)(S,2),D=A[0],_=A[1];return Object(o.useEffect)((function(){w("Full Glyph Definition"===h?g()(W(JSON.parse(g()(i.spec)))):g()(i.spec)),F(i.glyphWidth),_(i.glyphHeight)}),[i,h]),Object(o.useEffect)((function(){var n,o,a;try{a=W(JSON.parse(E))}catch(i){console.warn("Cannnot parse the edited code.")}if(a){!function(t,e,n,o){if(t&&e){s.h(t).selectAll("*").remove();var a=n+120,r=o+120;C(t,a,r,60,60,!1),G(s.h(t).append("g").attr("width",a-120).attr("height",r-120).attr("transform","translate(".concat(60,",").concat(60,")")),e)}}(e.current,a,H(a).width,H(a).height),s.h(t.current).selectAll("*").remove();var r=null===(n=a)||void 0===n||null===(o=n.tracks)||void 0===o?void 0:o.find((function(t){var e;return"glyph"===(null===(e=t.mark)||void 0===e?void 0:e.type)}));r&&s.a(r.data).then((function(e){return B(t.current,Object(l.a)(Object(l.a)({},r),{},{data:e}),z,D)}))}}),[E,z,D]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"demo-navbar"},"\ud83e\uddecGemini ",a.a.createElement("code",null,"Editor"),a.a.createElement("select",{onChange:function(t){d(v.find((function(e){return e.name===t.target.value})))},defaultValue:i.name},v.map((function(t){return a.a.createElement("option",{key:t.name,value:t.name},t.name)}))),a.a.createElement("select",{onChange:function(t){k(t.target.value)},defaultValue:"Full Glyph Definition"},["Full Glyph Definition","Predefined Glyph"].map((function(t){return a.a.createElement("option",{key:t,value:t},t)})))),a.a.createElement("div",{className:"editor"},a.a.createElement(y.a,{split:"vertical",defaultSize:"50%",onChange:function(){}},a.a.createElement(u,{code:E,readOnly:!1,onChange:Object(p.debounce)((function(t){w(t)}),1e3)}),a.a.createElement(y.a,{split:"horizontal",defaultSize:"35%",onChange:function(){}},a.a.createElement("div",{className:"preview-container"},a.a.createElement("b",null,"Glyph Preview"),a.a.createElement("div",null,a.a.createElement("svg",{ref:t}))),a.a.createElement("div",{className:"preview-container"},a.a.createElement("b",null,"Layout Preview"),a.a.createElement("div",null,a.a.createElement("svg",{ref:e})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.96b34d28.chunk.js.map